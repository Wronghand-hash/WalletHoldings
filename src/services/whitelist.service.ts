import { Whitelist } from '../db/models/whitelist';
import { ethers } from 'ethers';
import { Connection, PublicKey } from "@solana/web3.js";
import { TOKEN_PROGRAM_ID } from "@solana/spl-token";

// Example list of presale wallet addresses
const presaleWallets = [
    '0x72cb3dc95815c67f933e735d54136d191687d8f5',
    '0x44b6e8afbea51a81f8560eb0e2f5ff03ff12b949',
    '0x49ad790b5ebcd9ce8c713b2e6bfd4d9d1b7d878c',
    '0xe8e207ffca1ffcb280b6e2b87e33bc9daf0b9435',
    '0x0be74772f38cd2b2374f1a644d5e4a264538bdc3',
    // Add more addresses as needed
    '0xf6d03846d93f7054f3afec012fd43bfaaf3f7019',
    '0xf6d03846d93f7054f3afec012fd43bfaa3f7019',
    '0x2d0bf0b8ddd2b2300a6214884bdcd2ff34185bf4',
    '0x527f8be8822cf6f633c7fbae46194deb31a40f1f',
    '0xb3890a46b7713b0b616653e50b784674e6c134cc',
    '0xeb4f3c7873f70f485a84a6c2c245f1080e7c976e',
    '0x2356760eddae65c48a0d0482e13c440b5b97a35e',
    '0x8307bfa3eaca7bcecf6b937425ba4f248657a3b0',
    '0x4957593abe4d94e212c023af80cf543b324c598c',
    '0xcc596bc6753cb82e4383b83bda25b1133a84a5b3',
    '0x9ca5c316c228c79ded7017567568b558f07752c6',
    '0x5984d724043c2b9b530fd359307fb490e427b164',
    '0xe04c789daa3ffecb7383ec3c9ed1073b9f3bfe21',
    '0x55a96ea402216f25c7133e60bb20f00d2aa6f6bf',
    '0x2c7b2c0e07dc695d09945a59010fd551914f00ea',
    '0xb2b9349d62892a07e78be2a57d8fa8b1ab1f18fd',
    '0xa3c3a1e6c160442e8320f80a9fab1b302776c59f',
    '0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56',
    '0xd8cedc40d030f69f0ad1da005895d1eee9d93ade',
    '0xd7156920e193646435d12be25e2b9b0fe2a9f8cb',
    '0x6dba25204fbb7800c9eea52cd2e8a4eb667970b5',
    '0x00a6ae54b48a8c6edaf15aa7250c282d7c395b8b',
    '0x4af48810174a63f1495dcaf0e74af89e0e8e9c72',
    '0xf29a32073c35f228144f3d4b787d76f47ed3771f',
    '0x6eaef7353edeed69c5603babd07e19face5ee6ec',
    '0x2c7b2c0e07dc695d09945a59010fd551914f00ea',
    '0x2c739019895e6e74552afe2de548e92b91da7ba9',
    '0xae620d6b928b153f20e6edb18c995473af1e8fe3',
    '0x39cae88ad6c41d03f92fac947bd785221459ff85',
    '0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56',
    '0x1b2a7509a8b1bb22d598f97e707c88f0980e8e89',
    '0x7a43c11ec9cce5e72850399fa94f3fd44f829400',
    '0xb838137b1e70a83ab6f7a375bfb02ed87cd3c789',
    '0xbe659018e3e8afe7838e6c786996d663a5699813',
    '0xf29a32073c35f228144f3d4b787d76f47ed3771f',
    '0xc6b0f7e747c23f65e1f99617b379fe69b56cee32',
    '0xdf8f8e44d8bc80c2c740e333c3bd7cd8a15ce2f9',
    '0x98d73de5436dc80514573b9238e6d64412f58acb',
    '0x2c739019895e6e74552afe2de548e92b91da7ba9',
    '0x6939695106f17918254e29960e4920c09ba87624',
    '0x61d31b717dea9340b29005214fae2ceadabdf579',
    '0xe663a3482f28c3e6614696f84dc78b71fd108cfb',
    '0xda4eed6ebcca13e45b281f08f4394e470cecccfb',
    '0x824b5b54745dbc9ba8bc14a9a6fdf863c68b8981',
    '0xf4b902ae7278266120a6d35fd4571d14de0aa7e8',
    '0x373e4de28f1947986d3c06b8c057deca89940bce',
    '0x75842121f95feb6a37f78f96ebd9c4c3f85dbba7',
    '0x06ce905f9e2229a0bc62714bc39769bc7242548d',
    '0x463bfa3f6dfa2fe59e215b59e90c0c86716d721b',
    '0x641a5a81048ef74a5b891b7ce1c7db29ebebe234',
    '0x5cb6417f45e4bd8cd3272b59ae93e614596d406e',
    '0xd61b4f52027e0e677e369f28166e368c9609990e',
    '0xf2830011799adb2ae035e033607254b25bfafd97',
    '0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56',
    '0xad8a58532e97f8e214d710427f93a68d03e37f27',
    '0xa278eefb6a2a3a005cc2d84373ffac2c7eb2fcae',
    '0x415e9e87ba7b16729a5e1b27cdfd8aaf09e89dab',
    '0x4957593abe4d94e212c023af80cf543b324c598c',
    '0xda4eed6ebcca13e45b281f08f4394e470cecccfb',
    '0x727226abfe380bbbe0625f5b93b9c99bc6c4b26a',
    '0x66d49fce79447480081db785a224e832d9397594',
    '0xa37956a26da5820ce8d818b39f38f2846966c091',
    '0x73be8e0e8a4a32ebfdf852b7b7fde949336d714a',
    '0x2c739019895e6e74552afe2de548e92b91da7ba9',
    '0xd8cedc40d030f69f0ad1da005895d1eee9d93ade',
    '0x8366eae506f96a69845f05cb2742297c1e0ce3a6',
    '0xbe808123b9171b251879abd2615ea454576a25ef',
    '0x35d52b476e672ab3c444879493f334e50119ac73',
    '0x4feb2ba88364b15efda92460f962ad7e4819ba3c',
    '0x62b0ba40138cead5a783e28e9e4741263c2f7e3b',
    '0x728683e40ce8ef731782622e635771c1f7a1c321',
    '0xc8e80d15bf7a6740cfc50157f3cd554862317591',
    '0xe1d1ce29c69301d2187c451c23932d0b76a15bc2',
    '0x50d1d2fa463d81869e6989d36587264a806b3670',
    '0x4999bcb319c604ff5dc5dfe29159feb4a091f7de',
    '0x8792f760c86bbb3ffffabdfddd63b8d24808bc0f',
    '0x3acccc9bd41782c63d7a2cce2c5cc12ff752f463',
    '0x525aadb22d87caa26b00587dc6bf9a6cc2f414e5',
    '0x531fd876997b43d60079d50978c1a1aba4e240eb',
    '0x5c495bfc61d7d4ea16d9510724c07aa68bcfab5c',
    '0x70a284687cfa0c0c575adb778a51fdecb317c69c',
    '0x3e2c190282dbe0ceea8fcb1889e960a3ef85a187',
    '0xcd1949180b5fa01a47063b57a90613b7be93241c',
    '0x11ed5e29580bd6a04aa3f91e6eba12e0904c136e',
    '0xd48f4afc03ba555e4c00e8af4bef660b022d6111',
    '0xda4eed6ebcca13e45b281f08f4394e470cecccfb',
    '0x1ed9d7eb458b64d0ffa92c9c86b7bf97e8dbd4e8',
    '0x37732851593eede7d6299cd64d5ba4df70bfff78',
    '0xdab5ea767806688a81adfd3317d8d12270750457',
    '0x9b150de62169042c996e763b0f914a17fb9004b5',
    '0xc1ce6fa167bddce0a4e3873f06d0a7284af3b081',
    '0x973ca92242157a0edc861fef26eea1ad9fb551f4',
    '0x6135a1794d04ad3c65b0fb9dbeff5af72b1c89b9',
    '0x64d25f3ac5d69a53b9b097eae327b66f1b6e94eb',
    '0x83257ff1f6ebd6e55f7945afc5365e7339b85a8b',
    '0xab3ef67646b79c67525423b9e20df78499cd752d',
    '0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56',
    '0x75fa10609c86bdde77fbafce4fb9529a1ece9470',
    '0x0f363ce97e7bc1bf08174e6537266c6a1c893b25',
    '0xc5d29da863bf1f37b36c764eca0536bb5e0fda16',
    '0x50a692470bac4d1d7fd3468af4a2de147387dacd',
    '0x7ef582b58946fa05b733215f1f76bbc5a103a382',
    '0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56',
    '0x302cc319e98809b112e8d335745b09144a643c8c',
    '0x571c0c6bafe186a85df38325ba4e421ff295a9f0',
    '0x391cea6e1c804876e4370b8f35b058c8522b62b1',
    '0x9d5ca48d20c22275c922cbabdc18379788f4c749',
    '0xd70973633d5496e95c6ef822bf787f486d4890ac',
    '0xac8566fd11ac971bef0eefd0461d672264551493',
    '0xc94a9b2d56470e73d12d8e186dbf052a80df69bc',
    '0x17a5e8492709b223ab8d7aed62e70395c32e4544',
    '0xd70973633d5496e95c6ef822bf787f486d4890ac',
    '0x9791ca2bff6c98005ba55dcec9e09e27cdad8d7d',
    '0x391cea6e1c804876e4370b8f35b058c8522b62b1',
    '0x0f363ce97e7bc1bf08174e6537266c6a1c893b25',
    '0xf45483d03e72a1c7fac6ac20660e5f5978d35ded',
    '0x983d6028f3a3a924f9a9538d1a3893cc4b46ad63',
    '0x888851dc68c2f675c48b9967dd234dbe0e955fb7',
    '0x398e950ca302b7368ead8709973890bc4811aee7',
    '0xe743a49f04f2f77eb2d3b753ae3ad599de8cea84',
    '0x983d6028f3a3a924f9a9538d1a3893cc4b46ad63',
    '0xb584ce767e5a9be5d15238edfc6821eab9697181',
    '0xd70973633d5496e95c6ef822bf787f486d4890ac',
    '0x2fd8d2342d4277dccaf4f674aac4e5adacff6baf',
    '0x11ed5e29580bd6a04aa3f91e6eba12e0904c136e',
    '0x1cb5396e9779a4d8c3fd37ab253b5e6d8362df6a',
    '0x35a55b0caa6d9ea3d6e1e919e58971447e1f49d0',
    '0x7846362b68d41290a8d73da50f1e0aab536fc418',
    '0xc94a9b2d56470e73d12d8e186dbf052a80df69bc',
    '0x52efd7e83ab66c7d9df4fe582211b82ba1f33c57',
    '0x7924485b895e5af67a290880e4c594cb57513a55',
    '0xc1e549320f048d8149d5b0cb9cb268da59f1f2ad',
    '0x85d1770c96c6449ef6f6f84fd69d9ec0cd25d8ff',
    '0xa4d3316b09125c0d1bbfe757f43d3aae4e4e9d8f',
    '0x989f18cf116c6c4090bdc11dd9a70b5050a4fb6a',
    '0x8f3e8ab6cc8b3d565564256cce95ba9f213c2a0d',
    '0x00165457708c7c45b36106cd6a06acf0d7198688',
    '0x30d2b3076fdb59cc9f2ca7dbf74d9952c550aad1',
    '0xc94a9b2d56470e73d12d8e186dbf052a80df69bc',
    '0xba276dc7e418f04315efa9e41b1d3199fde3e679',
    '0x8078dca4a54429202f18147585ba8b1dad3282a1',
    '0x54f0d8ac50b3810947972a8fa7a754a1e1f41182',
    '0x4b6c5cd97a54ad1283f457f611d4d85d0417193d',
    '0x513a891a8482c5c0a38980adf3a70aac938a5059',
    '0x0c5ab98c527e7afd417c9c76258c3d464556e969',
    '0x9492d85b40e1cb7627b06a2faa673ef9db31f4a0',
    '0xdde13ce77ab940728ac1ac8ba3beada1fba5e054',
    '0xb10a062f66295b20fe8300c6784dd2b7569b268e',
    '0x3985872dc35306b774011fef5c8b7a1c544247a7',
    '0x3ee1c068fc9653489a5d03ab925047efeeb4bc26',
    '0xddafee7c1f70d9fd5651e117710aab3e1947c7da',
    '0x64bf1cbdc42d190c0fee949e9c1faaa14e77916a',
    '0x90391bc315dd4d7c5a92d63613dda3f746f86720',
    '0x4feb2ba88364b15efda92460f962ad7e4819ba3c',
    '0xed30aff40018f0dd60d4b17f0a529b45f5897abc',
    '0xc8e5a4c10122ffa57ce39ba103655578c3c45553',
    '0x24b35945df285b54c85edebb7489a9fcfafdb8dc',
    '0xa7c3d2cd9b6fa9fc33b0182a674fadd09f73e80d',
    '0x10fdd2a80183bfbf3be04bbd8383d67b467aa5f6',
    '0x3ee1c068fc9653489a5d03ab925047efeeb4bc26',
    '0x8792f760c86bbb3ffffabdfddd63b8d24808bc0f',
    '0x20cb38d1bee1ab301e35317e21255ce180642a1d',
    '0x602aa01f018cecf4c9975094987dbd6aa0311118',
    '0x33d39d0c843e7aa98a6de0e5b5337ed309bda122',
    '0x641a5a81048ef74a5b891b7ce1c7db29ebebe234',
    '0xc46e436943f65490d2bb44c9fb7e03f8c22f3396',
    '0xdb735be5af046f35f024462884798751275addd8',
    '0xbb87b97cd47033dd47363f692b29298f574cf113',
    '0x11ed5e29580bd6a04aa3f91e6eba12e0904c136e',
    '0xc46e436943f65490d2bb44c9fb7e03f8c22f3396',
    '0xf2830011799adb2ae035e033607254b25bfafd97',
    '0x6693897221c1d0a09ae3c31e08a56b5a8fcc22a1',
    '0x9804678e106a54aadcfbdc15944bb604c6e5494d',
    '0x2beae9f24b0e70f070371993acaf31ebec92f66d',
    '0xf55ad4dcdd63351cb1a5195fd06a31a31e080133',
    '0xdaff45e15112aa9cd1f3287413f0b6c24b57bc23',
    '0x87e399d72058e42ace5bcb5d3e17a9eeb21d6f20',
    '0xfac64f9ab70562a5824976373c6043e369f1ccfc',
    '0x2beae9f24b0e70f070371993acaf31ebec92f66d',
    '0xc94a9b2d56470e73d12d8e186dbf052a80df69bc',
    '0x708c28c3dd6f8db7a74118411933a10df837ff4f',
    '0x3af44f7796c1253f9fdefa558805e33f6f389e14',
    '0x7774c29565ac078bd3cf96bbf0c856198cc39453',
    '0xa86ff7a8d91a4b2d1e770089e606f979ed292c05',
    '0x898201824248d350f57cb4e0527891cf440e8efa',
    '0x2c739019895e6e74552afe2de548e92b91da7ba9',
    '0x66beed36c658a17d31ba23e6f2a03d9bbb21e590',
    '0x12d99ae1422f8cd199c1002418e456a7da5e29a8',
    '0x47211ccadd5f50b826de0cbfe611acf9e21cefda',
    '0x78d003833389ebd34532841aab64505b38e092f5',
    '0x3d9aa8f65898b5600122fd2b030decfbb24f1cb5',
    '0xb4887adb42946418637060a7182b65b2a4984f3b',
    '0x0b9090ab8eda1ec8e275220df369094480c8e264',
    '0x8e5123048dbb44a1d6322fbcac88317db3d1904e',
    '0xa3437aca4985922c8e80a467292050f5d2b49ece',
    '0xa9b809cfe8d95edbdd61603ba40081ba6da4f24b',
    '0x188531d725b4173396cd214a0348cf238b051147',
    '0xcc0cbd7a6024a49f32b6ef2164648cc08a386b79',
    '0xfed0d3bece3a2db3bee70ff5d41126d1a36c2e9f',
    '0xbd8c2456633685161801ea3628300238fe351b1a',
    '0xb343c17870aa3b15e2a8d5227049afcdd9ef4f3c',
    '0x5faef4a724f460102d0b9bb7f80fda132bc2c06c',
    '0x4ffd356143a6962215649c6c0d2ab35fac23cf90',
    '0x5a02da89d1f0901de089842accca5405782225b2',
    '0x9dcae8f5bcea6350055fbb17808bb610f43ff9ab',
    '0xf621926912d1ba113b2c9f5d9bb42ddb585b22b4',
    '0xd2db964696a802adeef23b09c44fe4564dc6479e',
    '0x9fc92d372f7f5897d99f55513aa6b6c69b0df4f5',
    '0xb5015caab037afcbfd5f63a4fbc846e939d65700',
    '0x758c9f6557d3ea3a4542cc2410cd430ed68cd31d',
    '0xc376ecff7b4b82c8b0a53a3043a0bc0b94c61ac3',
    '0x9c33aa86256156e8414cef946d5171b9820245b3',
    '0x4517cbe5efd19c1981f07087a5714d59719f5931',
    '0x795af134f8c620536ef01df4fa7d755cd190fb2c',
    '0xd36aac0c9676e984d72823fb662ce94d3ab5e551',
    '0xb2ebe8d1e03314348cc795f7fd19ecb8ec02bb58',
    '0x249cb8fe45e4c55078291947914326d585e0f606',
    '0xee07251785f18e5dff90fb02717728ffe468c0d5',
    '0x62583c0434953bf9d3539371bab49144b250dcc0',
    '0xdd346880dfa60ba062048db50599dffd46c4a79b',
    '0x6b029891c1862026e693186faa70a7a42542d8d0',
    '0xeda030a9acbecd8595a3f1a2c72311e23a89fc7a',
    '0x83bfa2efee05b6d11ca9ee14dcafa9328374ca18',
    '0xa94e4a112a26fd2c0db1da753b025b558d6d955f',
    '0x0db2d47548c3cd949f85a8e997feb3ff2ab0e555',
    '0xbf842c92b450613431a5232e6e528670e396386e',
    '0x06ebbc8481652e7da261698cad19ec1b7c23fa51',
    '0x778f3de575355807eaf199dd06c0dbb8c4ca647e',
    '0xb98c0f7fc9a57cddaaa24e520e4f081b32cc92e4',
    '0x9ca9112ef2589dbbb7082aee15bff8a695dc64a7',
    '0xf4cf6906a8bf5639fdb5a75426aa0d267d46d4a9',
    '0x8b1197e315d1c43ae64f64c3973e92b6b0614d29',
    '0x752a4fc627d8f2deba0a51786cfe147d39a24487',
    '0xd814e95d22aa0c413f95a384caf6d0c12394afc1',
    '0xfee46e1788600c8639079aa3039b3a4cce68d588',
    '0x49f65916e05fd9c28c49664d19f8647b915a82a2',
    '0x92b13da868555e283d4478f114f8ba818456da0a',
    '0xcae1eec70cc8c99a4cf41b6d09bb8428b5bca836',
    '0x3b9c0e3483194d1309c423a2f7fdddebdfa80841',
    '0xacb6b8a665cd4fb9df94af9294976f6a0f80dc11',
    '0x38e76eec55f10b12d82786ed32fb2d94186dc21b',
    '0x28590cf869842fe287d809c0296b319a280c1bae',
    '0xcd5a6286f376306c2bbf7a231166beee4f6d1a25',
    '0x14ce1a31460c9a2160a908d40ea2c2f431779109',
    '0x53e1c5c6f1c1788285f384f287f3f538a7e4ffa4',
    '0xdf4a174642527c3d3d90c750f71e9f530c881c5f',
    '0xd46e02339f7f21b9864f456509cde3b4fcc4c693',
    '0x491fb634ad667c8be1d530648b572d6dfe1945c7',
    '0x45dfbb3e0c91b8ddad6a04bad6250c498c2c8442',
    '0x03fbe69505414e8303f16b4caa0ff1c22d7e19f5',
    '0xff469c11cbd57d5fd9549f7f1d384f7cabe28400',
    '0x80eb7e062bda7987a4ff55c680027f7f95549afa',
    '0xd2abd7a3333395a1ed7e54c67edf43ef934033a1',
    '0x45e59342f6d8cda35e9abf2a9d7fee4b1eb3437b',
    '0x96eb73dc1dfea796ea2ea11f748c240b7931744b',
    '0xb335bee51cb875c4b5275211c64eed7267e54da1',
    '0x093362908f9eaa3dd68b807d623c6beaccc6f5ac',
    '0x0dfa4573c89c8248550790336ac00fd843be7524',
    '0x35812082e6363dc84e488bfd1d5700ebcbe7e731',
    '0x7a3c9e36394b621318f9793ba967d5309c1e8f9e',
    '0x602aa01f018cecf4c9975094987dbd6aa0311118',
    '0x83bfa2efee05b6d11ca9ee14dcafa9328374ca18',
    '0xab4b8f0b03caf7fb01530dbeba093184e87adbab'
];

// Create a map of wallet addresses (lowercase) to token amounts
const presaleWalletAmounts = new Map<string, number>();

// List of wallet addresses and their token amounts
const walletData = [
    ['0x093362908f9eaa3dd68b807d623c6beaccc6f5ac', 750000.0],
    ['0x0dfa4573c89c8248550790336ac00fd843be7524', 750000.0],
    ['0xc1ce6fa167bddce0a4e3873f06d0a7284af3b081', 750000.0],
    ['0x973ca92242157a0edc861fef26eea1ad9fb551f4', 750000.0],
    ['0x83257ff1f6ebd6e55f7945afc5365e7339b85a8b', 750000.0],
    ['0xf6d03846d93f7054f3afec012fd43bfaaf3f7019', 750000.0],
    ['0xab3ef67646b79c67525423b9e20df78499cd752d', 750000.0],
    ['0xdab5ea767806688a81adfd3317d8d12270750457', 750000.0],
    ['0x64d25f3ac5d69a53b9b097eae327b66f1b6e94eb', 750000.0],
    ['0x6135a1794d04ad3c65b0fb9dbeff5af72b1c89b9', 750000.0],
    ['0x9b150de62169042c996e763b0f914a17fb9004b5', 750000.0],
    ['0x37732851593eede7d6299cd64d5ba4df70bfff78', 735485.29387254901960775],
    ['0xda4eed6ebcca13e45b281f08f4394e470cecccfb', 122549.01887254901960775],
    ['0x1ed9d7eb458b64d0ffa92c9c86b7bf97e8dbd4e8', 49019.60759803921568625],
    ['0xd48f4afc03ba555e4c00e8af4bef660b022d6111', 750000.0],
    ['0xcd1949180b5fa01a47063b57a90613b7be93241c', 539215.68602941176470575],
    ['0x11ed5e29580bd6a04aa3f91e6eba12e0904c136e', 294317.846813725490196],
    ['0x3e2c190282dbe0ceea8fcb1889e960a3ef85a187', 750000.0],
    ['0x70a284687cfa0c0c575adb778a51fdecb317c69c', 750000.0],
    ['0x5c495bfc61d7d4ea16d9510724c07aa68bcfab5c', 750000.0],
    ['0x728683e40ce8ef731782622e635771c1f7a1c321', 455300.471813725490196],
    ['0x4feb2ba88364b15efda92460f962ad7e4819ba3c', 233350.45343137254901925],
    ['0x62b0ba40138cead5a783e28e9e4741263c2f7e3b', 711780.35196078431372525],
    ['0x531fd876997b43d60079d50978c1a1aba4e240eb', 367647.058578431372549],
    ['0x3acccc9bd41782c63d7a2cce2c5cc12ff752f463', 735294.1174019607843135],
    ['0xbe808123b9171b251879abd2615ea454576a25ef', 86776.42745098039215675],
    ['0x2c739019895e6e74552afe2de548e92b91da7ba9', 713854.7311274509803915],
    ['0x525aadb22d87caa26b00587dc6bf9a6cc2f414e5', 24553.93602941176470575],
    ['0x73be8e0e8a4a32ebfdf852b7b7fde949336d714a', 569608.14313725490196075],
    ['0x8792f760c86bbb3ffffabdfddd63b8d24808bc0f', 389767.059803921568627],
    ['0xa278eefb6a2a3a005cc2d84373ffac2c7eb2fcae', 410303.359313725490196],
    ['0x4999bcb319c604ff5dc5dfe29159feb4a091f7de', 235290.767892156862745],
    ['0x4957593abe4d94e212c023af80cf543b324c598c', 578706.19607843137254875],
    ['0x50d1d2fa463d81869e6989d36587264a806b3670', 481054.92549019607843125],
    ['0xe1d1ce29c69301d2187c451c23932d0b76a15bc2', 73529.41151960784313725],
    ['0x3c8424b8ed9a0aef62e63602272c9b21d7dbab56', 252070.72401960784313675],
    ['0xc8e80d15bf7a6740cfc50157f3cd554862317591', 114705.88210784313725475],
    ['0x5cb6417f45e4bd8cd3272b59ae93e614596d406e', 113966.6625],
    ['0x35d52b476e672ab3c444879493f334e50119ac73', 735049.019362745098039],
    ['0x8366eae506f96a69845f05cb2742297c1e0ce3a6', 171496.7181372549019605],
    ['0xd8cedc40d030f69f0ad1da005895d1eee9d93ade', 196078.43088235294117625],
    ['0x727226abfe380bbbe0625f5b93b9c99bc6c4b26a', 73284.3134803921568625],
    ['0x66d49fce79447480081db785a224e832d9397594', 582688.86813725490196075],
    ['0xa37956a26da5820ce8d818b39f38f2846966c091', 502450.98014705882352925],
    ['0x415e9e87ba7b16729a5e1b27cdfd8aaf09e89dab', 231274.50931372549019575],
    ['0x373e4de28f1947986d3c06b8c057deca89940bce', 45598.2674019607843135],
    ['0x824b5b54745dbc9ba8bc14a9a6fdf863c68b8981', 5671.48406862745098025],
    ['0xf4b902ae7278266120a6d35fd4571d14de0aa7e8', 42082.5384803921568625],
    ['0xad8a58532e97f8e214d710427f93a68d03e37f27', 96855.11029411764705875],
    ['0x75842121f95feb6a37f78f96ebd9c4c3f85dbba7', 25521.43995098039215675],
    ['0xf2830011799adb2ae035e033607254b25bfafd97', 750000.0],
    ['0xd61b4f52027e0e677e369f28166e368c9609990e', 24509.80367647058823525],
    ['0x463bfa3f6dfa2fe59e215b59e90c0c86716d721b', 232843.1370098039215685],
    ['0x641a5a81048ef74a5b891b7ce1c7db29ebebe234', 94618.606862745098039],
    ['0x06ce905f9e2229a0bc62714bc39769bc7242548d', 48529.41151960784313725],
    ['0xe663a3482f28c3e6614696f84dc78b71fd108cfb', 244607.842892156862745],
    ['0xdf8f8e44d8bc80c2c740e333c3bd7cd8a15ce2f9', 57102.11568627450980375],
    ['0x61d31b717dea9340b29005214fae2ceadabdf579', 19607.842892156862745],
    ['0x6939695106f17918254e29960e4920c09ba87624', 8019.552941176470588],
    ['0x98d73de5436dc80514573b9238e6d64412f58acb', 735049.019362745098039],
    ['0xb838137b1e70a83ab6f7a375bfb02ed87cd3c789', 2505.4941176470588235],
    ['0x03fbe69505414e8303f16b4caa0ff1c22d7e19f5', 591012.0392156862745095],
    ['0xf29a32073c35f228144f3d4b787d76f47ed3771f', 735294.11715686274509775],
    ['0xc6b0f7e747c23f65e1f99617b379fe69b56cee32', 150100.440441176470588],
    ['0xae620d6b928b153f20e6edb18c995473af1e8fe3', 31702.9198529411764705],
    ['0xbe659018e3e8afe7838e6c786996d663a5699813', 49019.60759803921568625],
    ['0x1b2a7509a8b1bb22d598f97e707c88f0980e8e89', 750000.0],
    ['0x7a43c11ec9cce5e72850399fa94f3fd44f829400', 48815.1495098039215685],
    ['0x39cae88ad6c41d03f92fac947bd785221459ff85', 24509.80367647058823525],
    ['0x2c7b2c0e07dc695d09945a59010fd551914f00ea', 144607.84264705882352925],
    ['0x6eaef7353edeed69c5603babd07e19face5ee6ec', 12254.90171568627450975],
    ['0x4af48810174a63f1495dcaf0e74af89e0e8e9c72', 2426.472549019607843],
    ['0x00a6ae54b48a8c6edaf15aa7250c282d7c395b8b', 136136.49730392156862725],
    ['0xd7156920e193646435d12be25e2b9b0fe2a9f8cb', 570585.51151960784313725],
    ['0x6dba25204fbb7800c9eea52cd2e8a4eb667970b5', 25490.19583333333333325],
    ['0xcc596bc6753cb82e4383b83bda25b1133a84a5b3', 28471.02745098039215675],
    ['0x5984d724043c2b9b530fd359307fb490e427b164', 750000.0],
    ['0x9ca5c316c228c79ded7017567568b558f07752c6', 30296.417156862745098],
    ['0x8307bfa3eaca7bcecf6b937425ba4f248657a3b0', 48965.68602941176470575],
    ['0x2356760eddae65c48a0d0482e13c440b5b97a35e', 5671.32696078431372525],
    ['0xeb4f3c7873f70f485a84a6c2c245f1080e7c976e', 8531.4776960784313725],
    ['0x527f8be8822cf6f633c7fbae46194deb31a40f1f', 28494.326470588235294],
    ['0x7774c29565ac078bd3cf96bbf0c856198cc39453', 56454.18946078431372525],
    ['0x2d0bf0b8ddd2b2300a6214884bdcd2ff34185bf4', 750000.0],
    ['0x708c28c3dd6f8db7a74118411933a10df837ff4f', 4095.09583333333333325],
    ['0x2beae9f24b0e70f070371993acaf31ebec92f66d', 57099.4299019607843135],
    ['0x3af44f7796c1253f9fdefa558805e33f6f389e14', 12254.90171568627450975],
    ['0xc94a9b2d56470e73d12d8e186dbf052a80df69bc', 72844.780147058823529],
    ['0xfac64f9ab70562a5824976373c6043e369f1ccfc', 14705.88210784313725475],
    ['0x87e399d72058e42ace5bcb5d3e17a9eeb21d6f20', 196078.431127450980392],
    ['0xdaff45e15112aa9cd1f3287413f0b6c24b57bc23', 49019.60759803921568625],
    ['0xf55ad4dccdd63351cb1a5195fd06a31a31e080133', 735294.1174019607843135],
    ['0x6693897221c1d0a09ae3c31e08a56b5a8fcc22a1', 1424.794362745098039],
    ['0x9804678e106a54aadcfbdc15944bb604c6e5494d', 4901.9605392156862745],
    ['0x9c33aa86256156e8414cef946d5171b9820245b3', 223529.017401960784313],
    ['0xc46e436943f65490d2bb44c9fb7e03f8c22f3396', 28482.32401960784313675],
    ['0xbb87b97cd47033dd47363f692b29298f574cf113', 28527.60122549019607825],
    ['0xdb735be5af046f35f024462884798751275addd8', 1709.6924019607843135],
    ['0x33d39d0c843e7aa98a6de0e5b5337ed309bda122', 2298.59705882352941175],
    ['0x602aa01f018cecf4c9975094987dbd6aa0311118', 750000.0],
    ['0x20cb38d1bee1ab301e35317e21255ce180642a1d', 19945.568627450980392],
    ['0x3ee1c068fc9653489a5d03ab925047efeeb4bc26', 750000.0],
    ['0x4b6c5cd97a54ad1283f457f611d4d85d0417193d', 58657.810049019607843],
    ['0x10fdd2a80183bfbf3be04bbd8383d67b467aa5f6', 49019.60759803921568625],
    ['0xa7c3d2cd9b6fa9fc33b0182a674fadd09f73e80d', 1463.740196078431372],
    ['0x24b35945df285b54c85edebb7489a9fcfafdb8dc', 17095.88872549019607825],
    ['0xc8e5a4c10122ffa57ce39ba103655578c3c45553', 48444.53333333333333325],
    ['0xed30aff40018f0dd60d4b17f0a529b45f5897abc', 28503.9424019607843135],
    ['0x90391bc315dd4d7c5a92d63613dda3f746f86720', 8547.614705882352941],
    ['0x64bf1cbdc42d190c0fee949e9c1faaa14e77916a', 284.522549019607843],
    ['0xddafee7c1f70d9fd5651e117710aab3e1947c7da', 113825.09387254901960775],
    ['0x3985872dc35306b774011fef5c8b7a1c544247a7', 56938.6877450980392155],
    ['0xb10a062f66295b20fe8300c6784dd2b7569b268e', 50086.6237745098039215],
    ['0x14ce1a31460c9a2160a908d40ea2c2f431779109', 16662.012254901960784],
    ['0xdde13ce77ab940728ac1ac8ba3beada1fba5e054', 49019.60759803921568625],
    ['0x9492d85b40e1cb7627b06a2faa673ef9db31f4a0', 37056.3524509803921565],
    ['0x513a891a8482c5c0a38980adf3a70aac938a5059', 443161.429656862745098],
    ['0x0c5ab98c527e7afd417c9c76258c3d464556e969', 63506.37230392156862725],
    ['0x54f0d8ac50b3810947972a8fa7a754a1e1f41182', 317710.913235294117647],
    ['0x8078dca4a54429202f18147585ba8b1dad3282a1', 24509.80367647058823525],
    ['0xba276dc7e418f04315efa9e41b1d3199fde3e679', 147058.82328431372549],
    ['0x30d2b3076fdb59cc9f2ca7dbf74d9952c550aad1', 56701.639705882352941],
    ['0x00165457708c7c45b36106cd6a06acf0d7198688', 25335.83088235294117625],
    ['0x8f3e8ab6cc8b3d565564256cce95ba9f213c2a0d', 68041.82156862745098025],
    ['0x52efd7e83ab66c7d9df4fe582211b82ba1f33c57', 210539.2151960784313725],
    ['0x989f18cf116c6c4090bdc11dd9a70b5050a4fb6a', 82772.943627450980392],
    ['0xa4d3316b09125c0d1bbfe757f43d3aae4e4e9d8f', 11309.61568627450980375],
    ['0x85d1770c96c6449ef6f6f84fd69d9ec0cd25d8ff', 18660.801470588235294],
    ['0xc1e549320f048d8149d5b0cb9cb268da59f1f2ad', 283151.57156862745098025],
    ['0x7924485b895e5af67a290880e4c594cb57513a55', 166981.37475490196078425],
    ['0x7846362b68d41290a8d73da50f1e0aab536fc418', 135938.58480392156862725],
    ['0x35a55b0caa6d9ea3d6e1e919e58971447e1f49d0', 735294.1174019607843135],
    ['0x1cb5396e9779a4d8c3fd37ab253b5e6d8362df6a', 288993.75269607843137225],
    ['0xd70973633d5496e95c6ef822bf787f486d4890ac', 28446.92769607843137225],
    ['0x2fd8d2342d4277dccaf4f674aac4e5adacff6baf', 287075.85171568627450975],
    ['0xb584ce767e5a9be5d15238edfc6821eab9697181', 60667.44313725490196075],
    ['0x983d6028f3a3a924f9a9538d1a3893cc4b46ad63', 4603.16960784313725475],
    ['0x0f363ce97e7bc1bf08174e6537266c6a1c893b25', 73742.86519607843137225],
    ['0x398e950ca302b7368ead8709973890bc4811aee7', 22491.042892156862745],
    ['0x888851dc68c2f675c48b9967dd234dbe0e955fb7', 168487.94264705882352925],
    ['0xf45483d03e72a1c7fac6ac20660e5f5978d35ded', 28112.7448529411764705],
    ['0x391cea6e1c804876e4370b8f35b058c8522b62b1', 735186.2742647058823525],
    ['0x9791ca2bff6c98005ba55dcec9e09e27cdad8d7d', 20588.235049019607843],
    ['0x17a5e8492709b223ab8d7aed62e70395c32e4544', 1.0],
    ['0xac8566fd11ac971bef0eefd0461d672264551493', 41613.805392156862745],
    ['0x9d5ca48d20c22275c922cbabdc18379788f4c749', 159987.71813725490196075],
    ['0x571c0c6bafe186a85df38325ba4e421ff295a9f0', 351233.56446078431372525],
    ['0x302cc319e98809b112e8d335745b09144a643c8c', 55330.14093137254901925],
    ['0x7ef582b58946fa05b733215f1f76bbc5a103a382', 27751.43799019607843125],
    ['0x50a692470bac4d1d7fd3468af4a2de147387dacd', 14705.88210784313725475],
    ['0xc5d29da863bf1f37b36c764eca0536bb5e0fda16', 12254.90171568627450975],
    ['0x75fa10609c86bdde77fbafce4fb9529a1ece9470', 15018.48455882352941175],
    ['0xb335bee51cb875c4b5275211c64eed7267e54da1', 30477.05906862745098025],
    ['0x80eb7e062bda7987a4ff55c680027f7f95549afa', 749051.15784313725490175],
    ['0x96eb73dc1dfea796ea2ea11f748c240b7931744b', 24869.88455882352941125],
    ['0x45e59342f6d8cda35e9abf2a9d7fee4b1eb3437b', 24000.0],
    ['0xd2abd7a3333395a1ed7e54c67edf43ef934033a1', 161328.76372549019607825],
    ['0xff469c11cbd57d5fd9549f7f1d384f7cabe28400', 31862.7448529411764705],
    ['0x45dfbb3e0c91b8ddad6a04bad6250c498c2c8442', 27392.27769607843137225],
    ['0x7a3c9e36394b621318f9793ba967d5309c1e8f9e', 16164.32867647058823525],
    ['0x491fb634ad667c8be1d530648b572d6dfe1945c7', 16469.78529411764705875],
    ['0xd46e02339f7f21b9864f456509cde3b4fcc4c693', 490196.07818627450980375],
    ['0xdf4a174642527c3d3d90c750f71e9f530c881c5f', 5484.760049019607843],
    ['0x53e1c5c6f1c1788285f384f287f3f538a7e4ffa4', 735049.019362745098039],
    ['0x35812082e6363dc84e488bfd1d5700ebcbe7e731', 5378.338970588235294],
    ['0x28590cf869842fe287d809c0296b319a280c1bae', 29411.76446078431372525],
    ['0xfee46e1788600c8639079aa3039b3a4cce68d588', 102941.1759803921568625],
    ['0x38e76eec55f10b12d82786ed32fb2d94186dc21b', 23093.76102941176470575],
    ['0xacb6b8a665cd4fb9df94af9294976f6a0f80dc11', 122.5487745098039215],
    ['0xcae1eec70cc8c99a4cf41b6d09bb8428b5bca836', 20007.0308529411764705],
    ['0x3b9c0e3483194d1309c423a2f7fdddebdfa80841', 92401.9605392156862745],
    ['0x0db2d47548c3cd949f85a8e997feb3ff2ab0e555', 2824.3345588235294115],
    ['0x92b13da868555e283d4478f114f8ba818456da0a', 12254.90171568627450975],
    ['0x49f65916e05fd9c28c49664d19f8647b915a82a2', 24509.80367647058823525],
    ['0xd814e95d22aa0c413f95a384caf6d0c12394afc1', 60049.019362745098039],
    ['0x752a4fc627d8f2deba0a51786cfe147d39a24487', 133244.0875],
    ['0x8b1197e315d1c43ae64f64c3973e92b6b0614d29', 275574.296813725490196],
    ['0xf4cf6906a8bf5639fdb5a75426aa0d267d46d4a9', 64025.73602941176470575],
    ['0x9ca9112ef2589dbbb7082aee15bff8a695dc64a7', 21658.00245098039215675],
    ['0xb98c0f7fc9a57cddaaa24e520e4f081b32cc92e4', 55392.1566176470588235],
    ['0x778f3de575355807eaf199dd06c0dbb8c4ca647e', 27654.38284313725490175],
    ['0x06ebbc8481652e7da261698cad19ec1b7c23fa51', 900.0],
    ['0xbf842c92b450613431a5232e6e528670e396386e', 143505.07818627450980375],
    ['0xa94e4a112a26fd2c0db1da753b025b558d6d955f', 27561.30171568627450975],
    ['0x83bfa2efee05b6d11ca9ee14dcafa9328374ca18', 32432.7392156862745095],
    ['0xeda030a9acbecd8595a3f1a2c72311e23a89fc7a', 245.09779411764705875],
    ['0x6b029891c1862026e693186faa70a7a42542d8d0', 22057.205392156862745],
    ['0xdd346880dfa60ba062048db50599dffd46c4a79b', 222379.9884803921568625],
    ['0x62583c0434953bf9d3539371bab49144b250dcc0', 3676.47034313725490175],
    ['0xee07251785f18e5dff90fb02717728ffe468c0d5', 4901.96004901960784275],
    ['0x249cb8fe45e4c55078291947914326d585e0f606', 66624.64705882352941175],
    ['0xb2ebe8d1e03314348cc795f7fd19ecb8ec02bb58', 128520.10906862745098025],
    ['0x795af134f8c620536ef01df4fa7d755cd190fb2c', 1884.1259803921568625],
    ['0x4517cbe5efd19c1981f07087a5714d59719f5931', 12254.90171568627450975],
    ['0xc376ecff7b4b82c8b0a53a3043a0bc0b94c61ac3', 30558.7634803921568625],
    ['0x758c9f6557d3ea3a4542cc2410cd430ed68cd31d', 32677.5541666666666665],
    ['0xb5015caab037afcbfd5f63a4fbc846e939d65700', 49215.57352941176470575],
    ['0x9fc92d372f7f5897d99f55513aa6b6c69b0df4f5', 24485.29387254901960775],
    ['0xd2db964696a802adeef23b09c44fe4564dc6479e', 725348.446078431372549],
    ['0xf621926912d1ba113b2c9f5d9bb42ddb585b22b4', 722224.825735294117647],
    ['0x9dcae8f5bcea6350055fbb17808bb610f43ff9ab', 4293.56642156862745075],
    ['0x5a02da89d1f0901de089842accca5405782225b2', 713817.99656862745098025],
    ['0x4ffd356143a6962215649c6c0d2ab35fac23cf90', 19607.842892156862745],
    ['0x5faef4a724f460102d0b9bb7f80fda132bc2c06c', 2762.80122549019607825],
    ['0xbd8c2456633685161801ea3628300238fe351b1a', 691829.92009803921568625],
    ['0xb343c17870aa3b15e2a8d5227049afcdd9ef4f3c', 21505.85171568627450975],
    ['0xfed0d3bece3a2db3bee70ff5d41126d1a36c2e9f', 750000.0],
    ['0xcc0cbd7a6024a49f32b6ef2164648cc08a386b79', 2460.78406862745098025],
    ['0x188531d725b4173396cd214a0348cf238b051147', 185998.714460784313725],
    ['0xa86ff7a8d91a4b2d1e770089e606f979ed292c05', 695439.315225490196111],
    ['0xa9b809cfe8d95edbdd61603ba40081ba6da4f24b', 510503.026470588235294],
    ['0x66beed36c658a17d31ba23e6f2a03d9bbb21e590', 236558.04828431372549],
    ['0xa3437aca4985922c8e80a467292050f5d2b49ece', 357025.88799019607843125],
    ['0x8e5123048dbb44a1d6322fbcac88317db3d1904e', 48666.66642156862745075],
    ['0x0b9090ab8eda1ec8e275220df369094480c8e264', 421.56838235294117625],
    ['0xb4887adb42946418637060a7182b65b2a4984f3b', 58308.8230392156862745],
    ['0x3d9aa8f65898b5600122fd2b030decfbb24f1cb5', 147058.82303921568627425],
    ['0x78d003833389ebd34532841aab64505b38e092f5', 4901.9605392156862745],
    ['0x47211ccadd5f50b826de0cbfe611acf9e21cefda', 447310.4671568627450975],
    ['0x12d99ae1422f8cd199c1002418e456a7da5e29a8', 245098.038970588235294],
    ['0x898201824248d350f57cb4e0527891cf440e8efa', 2181.37230392156862725],
    ['0xa3c3a1e6c160442e8320f80a9fab1b302776c59f', 12254.90171568627450975],
    ['0xe04c789daa3ffecb7383ec3c9ed1073b9f3bfe21', 56899.8174019607843135],
    ['0xb3890a46b7713b0b616653e50b784674e6c134cc', 11375.2276960784313725],
    ['0xb2b9349d62892a07e78be2a57d8fa8b1ab1f18fd', 274509.80367647058823525],
    ['0x55a96ea402216f25c7133e60bb20f00d2aa6f6bf', 735294.1174019607843135],
    ['0xf55ad4dccdd63351cb1a5195fd06a31a31e080133', 735294.1174019607843135],
    ['0xF55AD4dCdd63351Cb1A5195fD06a31a31E080133', 735294.1174019607843135],
    ['0x898201824248d350f57cb4e0527891cf440e8efa', 2181.37230392156862725]
];

// Sum token amounts for each unique wallet address
walletData.forEach(([address, amount]) => {
    const lowerCaseAddress = String(address).toLowerCase();
    const currentAmount = presaleWalletAmounts.get(lowerCaseAddress) || 0;
    presaleWalletAmounts.set(lowerCaseAddress, currentAmount + Number(amount));
});

export const addWallet = async (walletAddress: string, chain: string, isPresale: boolean) => {
    return Whitelist.findOneAndUpdate(
        { walletAddress },
        { $set: { chain, lastUpdated: new Date(), isPresale } },
        { new: true, upsert: true }
    );
};

export const validatePresaleWallet = (walletAddress: string): boolean => {
    console.log('Validating wallet address:', walletAddress);
    const isValid = presaleWallets.includes(walletAddress.toLowerCase());
    console.log('Is valid presale wallet:', isValid);
    return isValid;
};

interface WalletTokenHolding {
    walletAddress: string;
    tokenAmount: number;
    tokenName?: string;
}

function isValidSolanaAddress(address: string): boolean {
    try {
        if (!/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(address)) {
            return false;
        }
        new PublicKey(address);
        return true;
    } catch {
        return false;
    }
}

// Helper function to delay execution
const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));

// Define a type guard function
function isWalletTokenHolding(result: WalletTokenHolding | null): result is WalletTokenHolding {
    return result !== null;
}

async function getTokenHoldersByMint(tokenMintAddress: string, walletAddresses: string[]): Promise<WalletTokenHolding[]> {
    try {
        console.log(`Starting token holder check for mint: ${tokenMintAddress}`);
        console.log(`Total wallets to check: ${walletAddresses.length}`);

        if (!isValidSolanaAddress(tokenMintAddress)) {
            throw new Error(`Invalid Solana token mint address: ${tokenMintAddress}`);
        }

        const connection = new Connection('https://staked.helius-rpc.com?api-key=e9289b2e-df2d-4292-bd37-3f792d43998a', 'confirmed');
        const holdings: WalletTokenHolding[] = [];
        const mintPubkey = new PublicKey(tokenMintAddress);

        const validWallets = walletAddresses.filter(address => {
            const isValid = isValidSolanaAddress(address);
            if (!isValid) {
                console.warn(`Skipping invalid Solana address: ${address}`);
            }
            return isValid;
        });

        console.log(`Valid wallets to process: ${validWallets.length}`);

        // Convert wallet addresses to Associated Token Account addresses
        const tokenAccountAddresses = await Promise.all(
            validWallets.map(async (walletAddress) => {
                const walletPubkey = new PublicKey(walletAddress);
                return await connection.getTokenAccountsByOwner(
                    walletPubkey,
                    { mint: mintPubkey }
                );
            })
        );

        // Get all token accounts in a single RPC call
        const accountInfos = await connection.getMultipleAccountsInfo(
            tokenAccountAddresses.flatMap(ta => ta.value.map(a => a.pubkey))
        );

        // Process the results
        validWallets.forEach((walletAddress, index) => {
            const tokenAccounts = tokenAccountAddresses[index];
            if (tokenAccounts.value.length > 0) {
                const accountInfo = accountInfos[index];
                if (accountInfo) {
                    const data = accountInfo.data;
                    const amount = data.readBigInt64LE(64); // Token amount is stored at offset 64
                    const tokenAmount = Number(amount) / Math.pow(10, 9); // Assuming 9 decimals

                    console.log(`Wallet ${walletAddress} holds ${tokenAmount} tokens`);

                    if (tokenAmount > 0) {
                        holdings.push({
                            walletAddress,
                            tokenAmount,
                            tokenName: undefined
                        });
                    }
                }
            } else {
                console.log(`No tokens found for wallet ${walletAddress}`);
            }
        });

        console.log(`Found ${holdings.length} wallets with token holdings`);
        return holdings.sort((a, b) => b.tokenAmount - a.tokenAmount);

    } catch (error) {
        console.error("Error in getTokenHoldersByMint:", error);
        throw error;
    }
}

export { getTokenHoldersByMint };

export const getAllWhitelistedWallets = async () => {
    try {
        const whitelistedWallets = await Whitelist.find({})
            .sort({ lastUpdated: -1 })
            .lean();

        // Return only walletAddress and tokenAmount, excluding zero tokenAmount
        const walletsWithAmounts = whitelistedWallets.map(wallet => {
            const presaleWallet = wallet.presaleWallet ? wallet.presaleWallet.toLowerCase() : null;
            const tokenAmount = presaleWallet ? presaleWalletAmounts.get(presaleWallet) || 0 : 0;

            return {
                walletAddress: wallet.walletAddress,
                tokenAmount
            };
        }).filter(wallet => wallet.tokenAmount > 0);

        return walletsWithAmounts;
    } catch (error) {
        console.error('Error fetching whitelisted wallets:', error);
        throw error;
    }
};
